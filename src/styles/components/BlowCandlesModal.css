.candle-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

/* ===============================
    Modal Container
================================ */

.candle-modal {
  background: #556575;
  color: white;
  width: 820px;
  height: 600px;
  border-radius: 14px;
  padding: 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 18px;
  position: relative;
}

.close-btn {
  position: absolute;
  top: 10px;
  right: 12px;
  background: none;
  border: none;
  font-size: 18px;
  color: white;
  cursor: pointer;
}

/* ===============================
    Modal Title
================================ */

.candle-title {
  font-size: 22px;
  font-weight: 600;
  margin-top: 6px;
}

/* ===== 3D CAKE ===== */

.cake {
  position: relative;
  width: 250px;
  height: 200px;
  margin: 40px auto;
  transform-style: preserve-3d;
  perspective: 1000px;
}

.cake.celebrate {
  animation: cakeWobble 0.6s ease-in-out;
}

@keyframes cakeWobble {
  0% { transform: rotateZ(0deg); }
  25% { transform: rotateZ(1deg); }
  50% { transform: rotateZ(-1deg); }
  75% { transform: rotateZ(0.5deg); }
  100% { transform: rotateZ(0deg); }
}

/* Plate */

.plate {
  position: absolute;
  top: 100px;
  left: -95px;
  width: 425px;
  height: 275px;
  background: #ccc;
  border-radius: 50%;
  box-shadow:
    0 2px 0 #b3b3b3,
    0 4px 0 #b3b3b3,
    0 5px 40px rgba(0, 0, 0, 0.5);
}

/* Layers */

.layer {
  position: absolute;
  width: 400px;
  height: 250px;
  left: -82px;
  border-radius: 50%;
  background: #553c13;
  box-shadow:
    0 15px 0 #553c13,
    0 22px 0 #6a4a18,
    0 24px 0 #4a330f,
    0 26px 0 #472f0e,
    0 28px 0 #442c0d,
    0 30px 0 #41290c,
    0 32px 0 #3e260b;
  transform: translateZ(10px);
}

.layer-top { top: 0; }
.layer-middle { top: 33px; }
.layer-bottom { top: 66px; }

/* Icing */

.icing {
  position: absolute;
  top: 2px;
  left: -78px;
  width: 392px;
  height: 250px;
  background: #f0e4d0;
  border-radius: 50%;
  z-index: 10;
  transform: translateZ(25px);
}

.icing::before {
  content: "";
  position: absolute;
  inset: 8px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.35);
}

/* Drips */

.drip {
  position: absolute;
  background: #f0e4d0;
  border-bottom-left-radius: 25px;
  border-bottom-right-radius: 25px;
  z-index: 6;
}

.drip1 { top: 130px; width: 30px; height: 78px; left: -70px; border-radius: 230px 130px 230px 230px; transform: translateZ(24px); }
.drip4 { top: 170px; left: -25px; width: 100px; height: 120px; border-radius: 0 0 170px 130px; transform: translateZ(24px); }
.drip2 { top: 170px; left: 145px; width: 60px; height: 150px; border-radius: 0 0 40px 50px; transform: translateZ(24px); }
.drip3 { top: 130px; left: 210px; width: 100px; height: 120px; border-radius: 0 50px 250px 120px; transform: translateZ(24px); }

/* ===============================
    Candles Grouping
================================ */

.candles {
  position: absolute;
  z-index: 20;
  pointer-events: none;
  transform-style: preserve-3d;
  /* Lift the whole number assembly slightly above the icing */
  transform: translateZ(35px); 
}

/* We remove the hardcoded translateX/Y from here 
   because they are now handled by 'left' and 'top' 
   properties in your TSX file.
*/
.candles.one, .candles.two {
  width: 1px;
  height: 1px;
}

.candle {
  position: absolute;
  width: 12px;
  height: 45px;
  background: #7b020b;
  border-radius: 4px;
  transform-style: preserve-3d;
  /* Slightly tilt individual candles back so they stand 'up' on the 3D surface */
  transform: rotateX(-15deg); 
}

.candle::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 12px;
  height: 6px;
  background: #9c1d1d;
  border-radius: 50%;
}

/* Flame */

.flame {
  position: absolute;
  top: -28px;
  left: 50%;
  transform: translateX(-50%);
  width: 12px;
  height: 28px;
  background: radial-gradient(circle at bottom, #ffea00, orange, #ff4500);
  border-radius: 50% 50% 20% 20%;
  box-shadow:
    0 0 12px rgba(255, 165, 0, 0.8),
    0 0 25px rgba(255, 69, 0, 0.4);
  transform-origin: center bottom;
  animation: flicker 0.1s ease-in-out infinite alternate;
}

@keyframes flicker {
  0% { transform: translateX(-50%) skewX(2deg) scale(0.9); opacity: 0.8; }
  100% { transform: translateX(-50%) skewX(-2deg) scale(1.1); opacity: 1; }
}

/* Smoke */

.smoke {
  position: absolute;
  top: -15px;
  left: 50%;
  width: 6px;
  height: 6px;
  background: rgba(220, 220, 220, 0.5);
  border-radius: 50%;
  transform: translateX(-50%);
  animation: smoke 2s ease-out forwards;
}

@keyframes smoke {
  0% { opacity: 0.6; transform: translateX(-50%) translateY(0) scale(1); }
  100% { opacity: 0; transform: translateX(-50%) translateY(-50px) scale(2.5); }
}

/* UI Elements */

.mic-btn {
  background: #12b3c9;
  border: none;
  padding: 12px 20px;
  border-radius: 8px;
  color: white;
  cursor: pointer;
  font-size: 15px;
  font-weight: 600;
  margin-top: 160px;
  z-index: 100;
  transition: transform 0.2s;
}

.mic-btn:active {
  transform: scale(0.95);
}

.success {
  font-size: 20px;
  margin-top: 20px;
  font-weight: bold;
  color: #fff;
  text-shadow: 0 2px 8px rgba(0,0,0,0.4);
}

/* Confetti */

.confetti {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.confetti span {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 6px;
  height: 10px;
  background: hsl(var(--hue), 80%, 60%);
  animation: confetti 1.6s ease-out forwards;
}

@keyframes confetti {
  0% { opacity: 1; transform: translate(-50%, -50%) rotate(0deg); }
  100% { opacity: 0; transform: translate(calc(-50% + var(--x)), calc(-50% + var(--y))) rotate(720deg); }
}